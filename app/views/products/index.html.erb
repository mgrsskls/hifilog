<% content_for :header do %>
  <h1>
    <% if @sub_category.present? or @category.present? %>
      <%= (@sub_category.present? ? @sub_category : @category).name %>
    <% else %>
      <%= Product.model_name.human(count: 2) %>
    <% end %>
  </h1>
<% end %>

<% content_for :actions do %>
  <b>
    <%= Product.model_name.human(count: 2) %>
  </b>

  <%= link_to user_signed_in? ? new_product_path(sub_category: @sub_category&.slug) : new_user_session_path(redirect: new_product_path(sub_category: params[:sub_category])), class: "IndexPage-addLink" do %>
    <span><%= t('product.new.link') %></span>
  <% end %>
<% end %>

<% content_for :filter do %>
  <%= render "shared/filter", reset_path: products_path(category: params[:category]), collection: @products, custom_attributes: @custom_attributes, query: @products_query, type: :products, category: @category, sub_category: @sub_category, filter_applied: @filter_applied %>
<% end %>

<% content_for :sort do %>
  <label for="sort-select">Sort</label>
  <select name="sort" id="sort-select">
    <option value="name_asc"<%= " selected" if params[:sort] == "name_asc" %>><%= t('sort_by.name_asc') %></option>
    <option value="name_desc"<%= " selected" if params[:sort] == "name_desc" %>><%= t('sort_by.name_desc') %></option>
    <option value="release_date_desc"<%= " selected" if params[:sort] == "release_date_desc" %>><%= t('sort_by.release_date_desc') %></option>
    <option value="release_date_asc"<%= " selected" if params[:sort] == "release_date_asc" %>><%= t('sort_by.release_date_asc') %></option>
    <option value="added_desc"<%= " selected" if params[:sort] == "added_desc" %>><%= t('sort_by.added_desc') %></option>
    <option value="added_asc"<%= " selected" if params[:sort] == "added_asc" %>><%= t('sort_by.added_asc') %></option>
    <option value="updated_desc"<%= " selected" if params[:sort] == "updated_desc" %>><%= t('sort_by.updated_desc') %></option>
    <option value="updated_asc"<%= " selected" if params[:sort] == "updated_asc" %>><%= t('sort_by.updated_asc') %></option>
  </select>
<% end %>

<% content_for :table do %>
  <%= render "shared/products_table", products: @product_presenters, hide_category: @sub_category.present? %>
<% end %>

<%= render "shared/index_page",
  records: @products,
  presenters: @product_presenters,
  empty_state_message: t('empty_state.products_filter', path: new_product_path),
  category: @category,
  sub_category: @sub_category,
  type: :product
%>
