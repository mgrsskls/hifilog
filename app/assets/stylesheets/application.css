@layer global, components, utils;

@import url("./application/back_link.css") layer(components);
@import url("./application/breadcrumbs.css") layer(components);
@import url("./application/button.css") layer(components);
@import url("./application/empty_state.css") layer(components);
@import url("./application/flash_messages.css") layer(components);
@import url("./application/header.css") layer(components);
@import url("./application/heading.css") layer(components);
@import url("./application/footer.css") layer(components);
@import url("./application/menu.css") layer(components);
@import url("./application/page_actions.css") layer(components);
@import url("./application/pagination.css") layer(components);
@import url("./application/rte.css") layer(components);
@import url("./application/skip.css") layer(components);
@import url("./application/symbol.css") layer(components);
@import url("./application/table.css") layer(components);
@import url("./application/theme_toggle.css") layer(components);
@import url("./application/utils.css") layer(utils);

@layer global {
  html {
    block-size: 100%;
  }

  html,
  html:has([name="theme"][value="light"]:checked) {
    --underline-offset: 0.275em;
    --underline-width: 0.0625rem;
    --border: 0.0625rem solid;
    --border-light: var(--border) var(--color-border-light);
    --border-medium: var(--border) var(--color-border-medium);
    --border-dark: var(--border) var(--color-border-dark);
    --border-radius: 0.1875rem;
    --line-height: 1.75;
    --input-padding: 0.325em 1em;
    --page-spacing: 0.75rem;

    --hue: 208;
    --hue-sat: var(--hue), 25%;
    --hue-accent: 312;

    --color-white: #fff;
    --color-blue-10: hsl(204, 18.5%, 97.5%);
    --color-blue-90: hsl(208, 40%, 12.5%);
    --color-blue-100: hsl(208, 25%, 10%);

    --color-accent-on-light: hsl(var(--hue-accent), 34%, 25%);
    --color-accent-on-dark: hsl(var(--hue-accent), 34%, 75%);
    --color-copy-on-light: hsl(var(--hue), 30%, 20%);
    --color-copy-on-dark: hsl(var(--hue), 30%, 80%);
    --color-secondary-on-light: hsl(var(--hue), 30%, 40%);
    --color-secondary-on-dark: hsl(var(--hue), 30%, 60%);

    --color-bg: hsl(var(--bg-h-s), var(--bg-l));
    --color-bg2: var(--color-blue-10);
    --color-bg-selection: hsl(204, 18.5%, 75%);
    --color-header-bg: var(--color-blue-100);
    --color-header-copy: hsl(var(--hue-sat), 80%);
    --color-button-bg: hsl(var(--hue-sat), 40%);
    --color-button-box-shadow: hsla(0, 0%, 0%, var(--button-box-shadow-a));
    --color-input: hsl(208, 30%, 20%);
    --color-input-bg: #fff;
    --color-input-box-shadow: hsla(0, 0%, 0%, var(--input-box-shadow-a));
    --color-border-h-s: 0, 0%;
    --color-border-light: hsla(var(--color-border-h-s), var(--border-l), 15%);
    --color-border-medium: hsla(var(--color-border-h-s), var(--border-l), 30%);
    --color-border-dark: hsla(var(--color-border-h-s), var(--border-l), 50%);
    --color-focus-outline: hsl(var(--hue-accent), 100%, 50%);
    --color-accent: var(--color-accent-on-light);
    --color-highlight: var(--color-accent);
    --color-accent: var(--color-accent-on-light);
    --color-copy: var(--color-copy-on-light);
    --color-secondary: var(--color-secondary-on-light);

    /* light mode */

    --bg-h-s: 204, 18.5%;
    --bg-l: 100%;
    --button-box-shadow-a: 20%;
    --input-box-shadow-a: 10%;
    --border-l: 0%;

    --color-button-copy: #fff;
    --color-highlight-copy: #fff;
    --color-invalid-light: hsl(330, 50%, 85%);
    --color-invalid-dark: hsl(330, 100%, 20%);
    --color-invalid-bg: var(--color-invalid-light);
    --color-invalid-copy: var(--color-invalid-dark);
    --color-success-light: hsl(165, 50%, 85%);
    --color-success-dark: hsl(165, 100%, 20%);
    --color-success-bg: var(--color-success-light);
    --color-success-copy: var(--color-success-dark);
    --color-positive: hsl(160, 50%, 95%);
  }

  @media (prefers-color-scheme: dark) {
    html {
      --bg-h-s: 208, 40%;
      --bg-l: 15%;
      --button-box-shadow-a: 50%;
      --input-box-shadow-a: 30%;
      --border-l: 100%;

      --color-highlight-copy: hsl(var(--hue-accent), 34%, 15%);
      --color-invalid-bg: var(--color-invalid-dark);
      --color-invalid-copy: var(--color-invalid-light);
      --color-success-bg: var(--color-success-dark);
      --color-success-copy: var(--color-success-light);
      --color-positive: hsl(190, 40%, 15%);

      --color-bg2: var(--color-blue-90);
      --color-accent: var(--color-accent-on-dark);
      --color-copy: var(--color-copy-on-dark);
      --color-secondary: var(--color-secondary-on-dark);
    }
  }

  html:has([name="theme"][value="dark"]:checked),
  .is-dark {
    --bg-h-s: 208, 40%;
    --bg-l: 15%;
    --button-box-shadow-a: 50%;
    --input-box-shadow-a: 30%;
    --border-l: 100%;

    --color-highlight-copy: hsl(var(--hue-accent), 34%, 15%);
    --color-invalid-bg: var(--color-invalid-dark);
    --color-invalid-copy: var(--color-invalid-light);
    --color-success-bg: var(--color-success-dark);
    --color-success-copy: var(--color-success-light);
    --color-positive: hsl(190, 40%, 15%);

    --color-bg2: var(--color-blue-90);
    --color-accent: var(--color-accent-on-dark);
    --color-copy: var(--color-copy-on-dark);
    --color-secondary: var(--color-secondary-on-dark);

    color: var(--color-copy);
  }

  body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
      Helvetica, Arial, sans-serif;
    line-height: var(--line-height);
    margin: 0;
    color-scheme: light dark;
    background: red;
    color: var(--color-copy);
    accent-color: var(--color-accent);
    display: flex;
    flex-direction: column;
    min-block-size: 100%;
  }

   body > :is(header, nav, main, footer) {
    inline-size: 100%;
   }

  a {
    color: var(--color-accent);
    text-underline-offset: var(--underline-offset);
    text-decoration-thickness: var(--underline-width);
  }

  a:hover {
    color: var(--color-copy);
  }

  :is(a, input, button):focus-visible {
    outline: 0.125em solid var(--color-focus-outline);
    outline-offset: 0.1875em;
  }

  header {
    background: var(--color-header-bg);
    position: relative;
    z-index: 1;
  }

  main {
    flex: 1;
    padding-block: clamp(2rem, 4vw, 3rem);
  }

  h1,
  .h1 {
    font-size: 3rem;
    line-height: 1.1;
    margin-block: 0;
  }

  h1 span {
    font-weight: lighter;
  }

  h2,
  .h2 {
    font-size: 1.8rem;
    line-height: 1.2;
    font-weight: 500;
    color: var(--color-secondary);
    margin-block-start: 1.25em;
  }

  h3,
  .h3 {
    font-size: 1.4rem;
  }

  dd {
    margin: 0;
  }

  input:not([type="checkbox"], [type="radio"], [type="hidden"]) {
    all: unset;
  }

  select {
    background: none;
  }

  select,
  input:not([type="checkbox"], [type="radio"], [type="hidden"]) {
    font: inherit;
    color: var(--color-input);
    padding: var(--input-padding);
    border: var(--border-medium);
    border-radius: var(--border-radius);
    background: var(--color-input-bg);
    box-shadow: 0.05rem 0.1rem 0.5rem var(--color-input-box-shadow) inset;
    inline-size: 100%;
    box-sizing: border-box;
    block-size: 2.525rem;
  }

  .field_with_errors
    input:not([type="checkbox"], [type="radio"], [type="hidden"]) {
    border-color: var(--color-invalid-copy);
  }

  .field_with_errors label {
    color: var(--color-invalid-copy);
  }

  button {
    all: unset;
    border: var(--border) transparent;
    cursor: pointer;
  }

  svg {
    display: block;
  }

  summary {
    cursor: default;
  }

  .is-positive {
    background: var(--color-positive);
  }

  @media (max-width: 32em) {
    h1,
    .h1 {
      font-size: 2.4rem;
    }
  }
}
